(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{267:function(s,a,e){"use strict";e.r(a);var r=e(16),n=Object(r.a)({},(function(){var s=this,a=s.$createElement,e=s._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("h1",{attrs:{id:"构建jdk8基础镜像"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#构建jdk8基础镜像","aria-hidden":"true"}},[s._v("#")]),s._v(" 构建JDK8基础镜像")]),s._v(" "),e("h2",{attrs:{id:"下载centos-7-6-1810-基础镜像"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#下载centos-7-6-1810-基础镜像","aria-hidden":"true"}},[s._v("#")]),s._v(" 下载centos:7.6.1810 基础镜像")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("docker pull centos:7.6.1810\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h2",{attrs:{id:"创建文件夹jdk"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#创建文件夹jdk","aria-hidden":"true"}},[s._v("#")]),s._v(" 创建文件夹jdk")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("mkdir /jdk\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h2",{attrs:{id:"上传jdk到-jdk并解压"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#上传jdk到-jdk并解压","aria-hidden":"true"}},[s._v("#")]),s._v(" 上传JDK到/jdk并解压")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("tar -xvf jdk-8u65-linux-x64.tar.gz \n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h2",{attrs:{id:"删除jdk中多余文件"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#删除jdk中多余文件","aria-hidden":"true"}},[s._v("#")]),s._v(" 删除JDK中多余文件")]),s._v(" "),e("p",[e("strong",[s._v("创建rm.sh")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("#!/bin/bash\nrm -rf /jdk/jdk1.8.0_65/*src.zip &\nrm -rf /jdk/jdk1.8.0_65/lib/missioncontrol &\nrm -rf /jdk/jdk1.8.0_65/lib/visualvm &\nrm -rf /jdk/jdk1.8.0_65lib/*javafx* &\nrm -rf /jdk/jdk1.8.0_65jre/lib/plugin.jar &\nrm -rf /jdk/jdk1.8.0_65jre/lib/ext/jfxrt.jar &\nrm -rf /jdk/jdk1.8.0_65jre/bin/javaws &\nrm -rf /jdk/jdk1.8.0_65jre/lib/javaws.jar &\nrm -rf /jdk/jdk1.8.0_65jre/lib/desktop &\nrm -rf /jdk/jdk1.8.0_65jre/plugin &\nrm -rf /jdk/jdk1.8.0_65jre/lib/deploy* &\nrm -rf /jdk/jdk1.8.0_65jre/lib/*javafx* &\nrm -rf /jdk/jdk1.8.0_65jre/lib/*jfx* &\nrm -rf /jdk/jdk1.8.0_65jre/lib/amd64/libdecora_sse.so &\nrm -rf /jdk/jdk1.8.0_65jre/lib/amd64/libprism_*.so &\nrm -rf /jdk/jdk1.8.0_65jre/lib/amd64/libfxplugins.so &\nrm -rf /jdk/jdk1.8.0_65jre/lib/amd64/libglass.so &\nrm -rf /jdk/jdk1.8.0_65jre/lib/amd64/libgstreamer-lite.so &\nrm -rf /jdk/jdk1.8.0_65jre/lib/amd64/libjavafx*.so &\nrm -rf /jdk/jdk1.8.0_65jre/lib/amd64/libjfx*.so\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br"),e("span",{staticClass:"line-number"},[s._v("18")]),e("br"),e("span",{staticClass:"line-number"},[s._v("19")]),e("br"),e("span",{staticClass:"line-number"},[s._v("20")]),e("br"),e("span",{staticClass:"line-number"},[s._v("21")]),e("br")])]),e("p",[e("strong",[s._v("修改执行权限")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("chmod +x ./rm.sh\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("创建DockerFile")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('#插入以下内容\n#使用的基础镜像\nFROM centos:7.6.1810\n#作者信息\nMAINTAINER yuu "yjg_678@163.com"\n\n#创建目录\nRUN mkdir -p /java/jdk1.8.0_65\n#把当前目录下的jdk文件夹添加到镜像\nADD jdk1.8.0_65 /java/jdk1.8.0_65\n\n#添加环境变量\nENV JAVA_HOME /java/jdk1.8.0_65\nENV JAVA_BIN=/usr/local/src/java/jdk1.8.0_65/bin\nENV PATH=$JAVA_HOME/bin:$PATH\nENV CLASSPATH=.:$JAVA_HOME/lib/dt.jar:$JAVA_HOME/lib/tools.jar\nENV export JAVA_HOME JAVA_BIN PATH CLASSPATH\n\n#暴露8080端口\nEXPOSE 8080\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br"),e("span",{staticClass:"line-number"},[s._v("18")]),e("br"),e("span",{staticClass:"line-number"},[s._v("19")]),e("br"),e("span",{staticClass:"line-number"},[s._v("20")]),e("br")])]),e("h2",{attrs:{id:"创建镜像"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#创建镜像","aria-hidden":"true"}},[s._v("#")]),s._v(" 创建镜像")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("docker build -t jdk8:1.0 ./\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("blockquote",[e("p",[s._v("-t 指定镜像的名称和tag")])]),s._v(" "),e("h2",{attrs:{id:"创建容器"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#创建容器","aria-hidden":"true"}},[s._v("#")]),s._v(" 创建容器")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("docker run -it --name jdk8 jdk8:1.0\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h1",{attrs:{id:"构建eureka镜像"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#构建eureka镜像","aria-hidden":"true"}},[s._v("#")]),s._v(" 构建eureka镜像")]),s._v(" "),e("h2",{attrs:{id:"创建eureak文件夹"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#创建eureak文件夹","aria-hidden":"true"}},[s._v("#")]),s._v(" 创建eureak文件夹")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("mkdir /eureka\n\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("h2",{attrs:{id:"创建dockerfile"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#创建dockerfile","aria-hidden":"true"}},[s._v("#")]),s._v(" 创建Dockerfile")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('#指定基础镜像，在其上进行定制\nFROM jdk8:1.0\n#维护者信息\nMAINTAINER yuu <yjg_678@163.com>\n#这里的 /tmp 目录就会在运行时自动挂载为匿名卷，任何向 /tmp 中写入的信息都不会记录进容器存储层\nVOLUME /tmp\n#复制上下文目录下的target/demo-1.0.0.jar 到容器里\nCOPY wt-eureka-server-0.0.1-SNAPSHOT.jar wt-eureka-server-0.0.1-SNAPSHOT.jar\n#bash方式执行，使demo-1.0.0.jar可访问\n#RUN新建立一层，在其上执行这些命令，执行结束后， commit 这一层的修改，构成新的镜像。\nRUN bash -c "touch /wt-eureka-server-0.0.1-SNAPSHOT.jar"\n#声明运行时容器提供服务端口，这只是一个声明，在运行时并不会因为这个声明应用就会开启这个端口的服务\nEXPOSE 8080\n#指定容器启动程序及参数   <ENTRYPOINT> "<CMD>"\nENTRYPOINT ["java","-jar","wt-eureka-server-0.0.1-SNAPSHOT.jar"]\n\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br")])]),e("h2",{attrs:{id:"创建镜像-2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#创建镜像-2","aria-hidden":"true"}},[s._v("#")]),s._v(" 创建镜像")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("docker build -t eureka:1.0 ./\n\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("h2",{attrs:{id:"创建容器-2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#创建容器-2","aria-hidden":"true"}},[s._v("#")]),s._v(" 创建容器")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("docker run -d -p 8888:8080 --name eureka-server  eureka:1.0\n\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("h1",{attrs:{id:"构建redis镜像"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#构建redis镜像","aria-hidden":"true"}},[s._v("#")]),s._v(" 构建redis镜像")]),s._v(" "),e("h2",{attrs:{id:"准备上下文环境"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#准备上下文环境","aria-hidden":"true"}},[s._v("#")]),s._v(" 准备上下文环境")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("mkdir redis\n\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("h2",{attrs:{id:"下载redis压缩包"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#下载redis压缩包","aria-hidden":"true"}},[s._v("#")]),s._v(" 下载Redis压缩包")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("wget http://download.redis.io/releases/redis-5.0.5.tar.gz\n\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("h2",{attrs:{id:"解压"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#解压","aria-hidden":"true"}},[s._v("#")]),s._v(" 解压")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("tar -xzvf redis-5.0.5.tar.gz\n\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("h2",{attrs:{id:"准备编译环境"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#准备编译环境","aria-hidden":"true"}},[s._v("#")]),s._v(" 准备编译环境")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("yum -y install gcc\nyum -y install gcc-c++\ngcc --version\n\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br")])]),e("h2",{attrs:{id:"进入解压好的目录进行编译"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#进入解压好的目录进行编译","aria-hidden":"true"}},[s._v("#")]),s._v(" 进入解压好的目录进行编译")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("cd redis/redis-5.0.5\nmake\n\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("h2",{attrs:{id:"修改配置文件"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#修改配置文件","aria-hidden":"true"}},[s._v("#")]),s._v(" 修改配置文件")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('bind 0.0.0.0                              #修改bindip 使其他用户可访问\ndaemonize no                              #关闭守护进程(重点)\nrequirepass 123456                        #添加密码\nlogfile "/var/log/redis/redis-server.log" #设置日志路径\ncluster-enabled yes                       #配置集群相关信息\ncluster-config-file nodes-6379.conf\ncluster-node-timeout 15000\n\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br")])]),e("h2",{attrs:{id:"dockerfile"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#dockerfile","aria-hidden":"true"}},[s._v("#")]),s._v(" DockerFile")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('FROM centos:7.6.1810\n\nADD redis-5.0.5.tar.gz /\nRUN mkdir -p /redis\nADD redis.conf /redis/\nRUN rpm --rebuilddb && yum -y install gcc make\n\nWORKDIR /redis-5.0.5\nRUN make\nRUN mv /redis-5.0.5/src/redis-server /redis/\n\nWORKDIR /\nRUN rm -rf /redis-5.0.5\n\nVOLUME ["/var/log/redis/"]\n\nEXPOSE 6379\nCMD["/redis/redis-server","/redis/redis.conf"]\n\n\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br"),e("span",{staticClass:"line-number"},[s._v("18")]),e("br"),e("span",{staticClass:"line-number"},[s._v("19")]),e("br"),e("span",{staticClass:"line-number"},[s._v("20")]),e("br")])])])}),[],!1,null,null,null);a.default=n.exports}}]);